{% extends 'base.html' %}
{% load static %}

{% block title %}Between the Lines | {{ book.title }} by {{ book.author }} {% endblock %}

{% block content %}

<main class="container pt-4">
    <div class="row">
        <!-- Book detail -->
        <div class="col-12 col-lg-6">
            <div class="card mb-3 custom-card">
                <div class="row g-0">
                    <div class="col-md-4">
                        <img src="{{ book.cover_image.url }}" class="img-fluid rounded" alt="{{ book.title }}">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h2 class="card-title">{{ book.title }}</h2>
                            <h3 class="card-subtitle mb-2 text-muted">{{ book.author }}</h3>
                            <p class="card-text">{{ book.description }}</p>
                            <p class="card-text"><small class="text-muted">{{ book.genre.name }}</small></p>
                        </div>
                    </div>
                    <div class="col-md-12 pt-4">
                        <h2>Summary</h2>
                        <p>{{ book.summary }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- reviews -->
        <div class="col-12 col-lg-6">
            <h2>Reviews</h2>
            {% for review in reviews %}
            <div class="card-body">
                <h3 class="card-title">{{ review.title }} | <span class="text-muted">{{ review.user.username }}</span></h3>
                <div class="review-preview">
                    <div class="short-review">{{ review.content|truncatewords:30 }}</div>
                    <div class="full-review">{{ review.content }}</div>
                    <a href="#" class="toggle-review">Read more</a>
                </div>
                <p class="card-text"><small class="text-muted">Created on: {{ review.created_at|date:"F j, Y" }}
                    {% if review.created_at.date != review.updated_at.date %} | Updated on: {{ review.updated_at|date:"F j, Y" }}{% endif %}</small></p>
            </div>
            <hr>
            {% empty %}
                <p>No reviews yet.</p>
            {% endfor %}
        </div>
    </div>

</main>

{% endblock %}

{% block js %}
<!-- custom js -->
<script src="{% static 'js/book-detail.js' %}"></script>
{% endblock %}